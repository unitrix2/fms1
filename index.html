<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contract Management Cell</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes blob {0%, 100% {transform: translate(0, 0) scale(1);} 33% {transform: translate(30px, -50px) scale(1.1);} 66% {transform: translate(-20px, 20px) scale(0.9);}}
    .animate-blob {animation: blob 7s infinite;}
    .animation-delay-2000 {animation-delay: 2s;}
    .animation-delay-4000 {animation-delay: 4s;}
    * {margin: 0; padding: 0; box-sizing: border-box;}
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const {useState, useEffect} = React;
    
    // ========== CONFIG - YAHAN WORKER URL DALO ==========
    const API_URL = 'https://fms1.clickworld.workers.dev';
    
    // Icons (Inline SVG)
    const Icon = ({name, className = "w-5 h-5"}) => {
      const icons = {
        menu: <path d="M3 12h18M3 6h18M3 18h18"/>,
        x: <path d="M18 6L6 18M6 6l12 12"/>,
        search: <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>,
        dashboard: <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>,
        folder: <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>,
        settings: <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.4 4.4l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.4-4.4l4.2-4.2"/>,
        file: <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/>,
        plus: <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>,
        sun: <circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"/>,
        moon: <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>,
        qr: <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><path d="M14 14h3v3h-3zM19 19h2v2h-2zM19 14h2v2h-2zM14 19h3v2h-3z"/>,
        eye: <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>,
        download: <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m4-5l5 5 5-5m-5 5V3"/>,
        chevronRight: <polyline points="9 18 15 12 9 6"/>,
        users: <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75"/>,
        check: <polyline points="20 6 9 17 4 12"/>,
        xCircle: <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>,
        clock: <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>,
        upload: <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5-5 5m5-5v12"/>,
        chart: <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>,
        trending: <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>
      };
      return <svg className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" viewBox="0 0 24 24">{icons[name]}</svg>;
    };
    
    // Main App
    const App = () => {
      const [page, setPage] = useState('login');
      const [user, setUser] = useState(null);
      const [theme, setTheme] = useState('dark');
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [searchQuery, setSearchQuery] = useState('');
      const [searchResults, setSearchResults] = useState([]);
      const [stats, setStats] = useState(null);
      const [showQR, setShowQR] = useState(null);
      
      const api = async (endpoint, method = 'POST', body = null) => {
        const res = await fetch(`${API_URL}${endpoint}`, {
          method, 
          headers: {'Content-Type': 'application/json'},
          body: body ? JSON.stringify(body) : null
        });
        return await res.json();
      };
      
      useEffect(() => {
        if (searchQuery.length > 2) {
          const timer = setTimeout(async () => {
            const res = await api('/api/search', 'POST', {query: searchQuery});
            setSearchResults(res.results || []);
          }, 300);
          return () => clearTimeout(timer);
        } else {
          setSearchResults([]);
        }
      }, [searchQuery]);
      
      useEffect(() => {
        if (user && page === 'dashboard') loadDashboard();
      }, [user, page]);
      
      const loadDashboard = async () => {
        const res = await api('/api/dashboard', 'POST');
        setStats(res.stats);
      };
      
      // Login Page
      const LoginPage = () => {
        const [isLogin, setIsLogin] = useState(true);
        const [email, setEmail] = useState('');
        const [password, setPassword] = useState('');
        const [fullName, setFullName] = useState('');
        
        const handleSubmit = async (e) => {
          e.preventDefault();
          const res = await api('/api/auth', 'POST', {email, password, fullName, action: isLogin ? 'login' : 'signup'});
          if (res.success) {
            if (isLogin) {
              setUser(res.user);
              setPage('dashboard');
            } else {
              alert('Signup request submitted!');
            }
          } else {
            alert(res.error || res.message);
          }
        };
        
        return (
          <div className={`min-h-screen flex items-center justify-center p-4 ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
            <div className="absolute inset-0 overflow-hidden pointer-events-none">
              <div className="absolute top-0 left-1/4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
